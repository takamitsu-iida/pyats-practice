---

#
# testbed file for lab
#

#
# NOTE
# 1) The device name must match the hostname of the device, otherwise, the connection will hang.
# 2) At least one device need to have the alias ‘uut’ in the testbed yaml file.
#

testbed:
  name: iida-pyats on eve-ng

  # credentials:
  #   default:
  #     username: ''
  #     password: ''
  #   enable:
  #     password: ''

devices:

  # this host does NOT exist now
  fumidai:
    os: linux
    type: linux
    credentials:
      # ~/.ssh/configは読まないのでユーザ名はここで指定する
      default:
        username: bastion
    connections:
      vty:
        protocol: ssh
        ip: 10.38.220.46


  # must be hostname, same as prompt
  r1:
    alias: 'uut'

    # 機種に対応したプラグインを読み込む優先順位、osは必須でその他は任意
    #  chassis_type > os > platform > model

    # os
    # ios, iosxe, iosxr, nxos, junos
    # https://pubhub.devnetcloud.com/media/unicon/docs/user_guide/supported_platforms.html#
    os: iosxe

    # 任意
    platform: CSR1000v
    type: iosxe

    # credentials:
    #   default:
    #     password: ''
    #     username: ''
    #   enable:
    #     password: ''

    # スタックしている場合はchassis_typeを指定
    # chassis_type: stack
    connections:
      console:
        protocol: telnet
        ip: feve.nsc.css.fujitsu.com
        port: 35907
        arguments:
          # osがiosxeの場合、接続と同時に以下のコマンドが投入される
          #  - term length 0
          #  - term width 0
          #  - show version
          # init_exec_commandsに空っぽのリストを渡せば何も実行されなくなる
          # init_exec_commands: []

          # osがiosxeの場合、接続と同時に以下の設定変更を行う
          # - no logging console
          # - line console 0
          # - exec-timeout 0
          # - end
          # init_config_commandsに空のリストを渡せば設定変更を抑止できる
          init_config_commands: []

      # SSHで踏み台を経由する場合
      vty:
        proxy: fumidai
        protocol: ssh -oKexAlgorithms=+diffie-hellman-group14-sha1,diffie-hellman-group-exchange-sha1
        ip: 192.168.0.11
        port: -p 22


  r2:
    os: iosxe
    platform: iosxe
    type: CSR1000v
    connections:
      console:
        protocol: telnet
        ip: feve.nsc.css.fujitsu.com
        port: 59901

topology:
  r1:
    interfaces:
      GigabitEthernet1:
        ipv4: 192.168.12.1/24
        link: link-12
        type: ethernet
      Loopback0:
        ipv4: 192.168.255.1/32
        link: r1_Loopback0
        type: loopback

  r2:
    interfaces:
      GigabitEthernet1:
        ipv4: 192.168.12.2/24
        link: link-12
        type: ethernet
      Loopback0:
        ipv4: 192.168.255.2/32
        link: r2_Loopback0
        type: loopback
